<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayPal Setup - L√∂yt√∂kauppa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .setup-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .step {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        .input-group {
            margin: 1rem 0;
        }
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
        }
        .input-group input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        .btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #45a049;
        }
        .btn.secondary {
            background: #2196F3;
        }
        .btn.secondary:hover {
            background: #1976D2;
        }
        .status {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            font-weight: bold;
        }
        .status.success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }
        .status.error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
        }
        .status.warning {
            background: rgba(255, 193, 7, 0.3);
            border: 1px solid #FFC107;
        }
        .code-block {
            background: rgba(0,0,0,0.3);
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            margin: 1rem 0;
            overflow-x: auto;
            border: 1px solid rgba(255,255,255,0.2);
        }
    </style>
</head>
<body>
    <div class="setup-container">
        <h1>üîß PayPal Setup - L√∂yt√∂kauppa</h1>
        <p>Aseta PayPal Client ID checkout-toiminnallisuuden k√§ytt√∂√§ varten.</p>

        <div class="step">
            <h3>üìã Vaihe 1: Hanki PayPal Client ID</h3>
            <p>Jos sinulla ei ole PayPal Client ID:t√§:</p>
            <ol>
                <li>Mene osoitteeseen: <a href="https://developer.paypal.com" target="_blank" style="color: #FFC107;">developer.paypal.com</a></li>
                <li>Kirjaudu sis√§√§n PayPal-tilill√§</li>
                <li>Luo uusi sovellus (Create App)</li>
                <li>Valitse "Sandbox" ymp√§rist√∂ testausta varten</li>
                <li>Kopioi "Client ID" (alkaa yleens√§ "A..." kirjaimella)</li>
            </ol>
        </div>

        <div class="step">
            <h3>üîë Vaihe 2: Aseta Client ID</h3>
            <div class="input-group">
                <label for="clientId">PayPal Sandbox Client ID:</label>
                <input 
                    type="text" 
                    id="clientId" 
                    placeholder="Esim: AfB87g-R1Y6r8j0IhP7Rk8NWNSIlwvjhJoFeO1_n3U0JZm-_s4FjDMxz8qG5ElIqEiAInOJo7kX0XqOq"
                    style="font-family: monospace; font-size: 0.9rem;"
                >
            </div>
            <button class="btn" onclick="setClientId()">üíæ Tallenna Client ID</button>
            <button class="btn secondary" onclick="useDefaultId()">üéØ K√§yt√§ Oletusta</button>
        </div>

        <div class="step">
            <h3>üìä Vaihe 3: Tarkista Status</h3>
            <div id="status-info">
                <div class="status warning">
                    ‚è≥ PayPal Client ID ei ole asetettu
                </div>
            </div>
            <button class="btn secondary" onclick="checkStatus()">üîç Tarkista Status</button>
            <button class="btn secondary" onclick="testCheckout()">üõí Testaa Checkout</button>
        </div>

        <div class="step">
            <h3>üßπ Vaihe 4: Hallinta</h3>
            <button class="btn" style="background: #FF5722;" onclick="clearClientId()">üóëÔ∏è Poista Client ID</button>
            <button class="btn secondary" onclick="showCurrentId()">üëÅÔ∏è N√§yt√§ Nykyinen ID</button>
        </div>

        <div class="step">
            <h3>üìñ Tietoja</h3>
            <p><strong>Sandbox vs Production:</strong></p>
            <ul>
                <li><strong>Sandbox:</strong> Testik√§ytt√∂√∂n, ei oikeaa rahaa</li>
                <li><strong>Production:</strong> Oikeaan k√§ytt√∂√∂n, oikeaa rahaa</li>
            </ul>
            <p>T√§m√§ sivu asettaa vain Sandbox Client ID:n turvallista testausta varten.</p>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <a href="index.html" style="color: #FFC107; text-decoration: none;">‚Üê Takaisin etusivulle</a>
            <span style="margin: 0 1rem;">|</span>
            <a href="checkout.html" style="color: #FFC107; text-decoration: none;">Siirry kassalle ‚Üí</a>
        </div>
    </div>

    <script>
        function setClientId() {
            const clientId = document.getElementById('clientId').value.trim();
            
            if (!clientId) {
                showStatus('Sy√∂t√§ Client ID!', 'error');
                return;
            }
            
            if (clientId.length < 50) {
                showStatus('Client ID n√§ytt√§√§ liian lyhyelt√§. Tarkista ett√§ kopioit koko ID:n.', 'warning');
            }
            
            try {
                sessionStorage.setItem('paypal_sandbox_client_id', clientId);
                localStorage.setItem('paypal_setup_done', 'true');
                showStatus(`‚úÖ Client ID tallennettu onnistuneesti!<br>Pituus: ${clientId.length} merkki√§`, 'success');
                
                // Tarkista status automaattisesti
                setTimeout(checkStatus, 1000);
            } catch (error) {
                showStatus('Virhe tallentaessa: ' + error.message, 'error');
            }
        }
        
        function useDefaultId() {
            const defaultId = 'AfB87g-R1Y6r8j0IhP7Rk8NWNSIlwvjhJoFeO1_n3U0JZm-_s4FjDMxz8qG5ElIqEiAInOJo7kX0XqOq';
            document.getElementById('clientId').value = defaultId;
            
            sessionStorage.setItem('paypal_sandbox_client_id', defaultId);
            localStorage.setItem('paypal_setup_done', 'true');
            showStatus('‚úÖ Oletus Client ID asetettu! T√§m√§ toimii testaukseen.', 'success');
            
            setTimeout(checkStatus, 1000);
        }
        
        function checkStatus() {
            const clientId = sessionStorage.getItem('paypal_sandbox_client_id');
            const setupDone = localStorage.getItem('paypal_setup_done');
            
            let statusHtml = '';
            
            if (clientId) {
                statusHtml += `
                    <div class="status success">
                        ‚úÖ PayPal Client ID asetettu<br>
                        Pituus: ${clientId.length} merkki√§<br>
                        Alkaa: ${clientId.substring(0, 10)}...
                    </div>
                `;
            } else {
                statusHtml += `
                    <div class="status error">
                        ‚ùå PayPal Client ID ei ole asetettu
                    </div>
                `;
            }
            
            if (setupDone) {
                statusHtml += `
                    <div class="status success">
                        ‚úÖ PayPal setup merkitty valmiiksi
                    </div>
                `;
            }
            
            // Tarkista onko PayPal config ladattu
            if (window.paypalConfig) {
                statusHtml += `
                    <div class="status success">
                        ‚úÖ PayPal Config objekti l√∂ytyi<br>
                        Client ID: ${window.paypalConfig.clientId ? 'SET' : 'MISSING'}<br>
                        Currency: ${window.paypalConfig.currency || 'N/A'}
                    </div>
                `;
            } else {
                statusHtml += `
                    <div class="status warning">
                        ‚ö†Ô∏è PayPal Config objektia ei l√∂ytynyt (normaalia t√§ll√§ sivulla)
                    </div>
                `;
            }
            
            document.getElementById('status-info').innerHTML = statusHtml;
        }
        
        function clearClientId() {
            if (confirm('Haluatko varmasti poistaa PayPal Client ID:n?')) {
                sessionStorage.removeItem('paypal_sandbox_client_id');
                localStorage.removeItem('paypal_setup_done');
                document.getElementById('clientId').value = '';
                showStatus('üóëÔ∏è Client ID poistettu', 'warning');
                checkStatus();
            }
        }
        
        function showCurrentId() {
            const clientId = sessionStorage.getItem('paypal_sandbox_client_id');
            if (clientId) {
                alert(`Nykyinen Client ID:\n\n${clientId}`);
            } else {
                alert('Client ID ei ole asetettu');
            }
        }
        
        function testCheckout() {
            window.open('checkout.html', '_blank');
        }
        
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status-info');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        // Lataa status sivun avautuessa
        window.onload = function() {
            checkStatus();
            
            // Esit√§yt√§ kentt√§ jos ID on jo asetettu
            const existingId = sessionStorage.getItem('paypal_sandbox_client_id');
            if (existingId) {
                document.getElementById('clientId').value = existingId;
            }
        };
    </script>
</body>
</html>