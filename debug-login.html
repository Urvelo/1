<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√∂yt√∂kauppa - Kirjautuminen (Debug)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .debug { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error { color: red; }
        .success { color: green; }
        .warning { color: orange; }
        input, button { margin: 5px 0; padding: 10px; width: 200px; }
        button { background: #007cba; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #005a87; }
        #log { background: #000; color: #0f0; padding: 10px; height: 300px; overflow-y: scroll; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üîß L√∂yt√∂kauppa - Debug Testaus</h1>
    
    <div class="debug">
        <h3>1. JavaScript Lataus Testit</h3>
        <div id="js-tests"></div>
    </div>

    <div class="debug">
        <h3>2. Firebase Testit</h3>
        <div id="firebase-tests"></div>
    </div>

    <div class="debug">
        <h3>3. Kirjautumistesti</h3>
        <input type="email" id="testEmail" placeholder="admin@loytokauppa.fi" value="admin@loytokauppa.fi">
        <input type="password" id="testPassword" placeholder="admin123" value="admin123">
        <button onclick="testLogin()">üîê Testaa Kirjautuminen</button>
        <div id="login-result"></div>
    </div>

    <div class="debug">
        <h3>4. Rekister√∂intitesti</h3>
        <button onclick="testRegister()">üìù Testaa Rekister√∂inti</button>
        <div id="register-result"></div>
    </div>

    <div class="debug">
        <h3>5. Console Log</h3>
        <div id="log"></div>
    </div>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <!-- Authentication scripts -->
    <script src="firebase-config.js"></script>
    <script src="firebase-db.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="login.js"></script>

    <script>
        // Console.log intercept
        const logDiv = document.getElementById('log');
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        console.log = function(...args) {
            originalLog.apply(console, args);
            logDiv.innerHTML += '<div style="color: #0f0;">' + args.join(' ') + '</div>';
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            logDiv.innerHTML += '<div style="color: #f00;">ERROR: ' + args.join(' ') + '</div>';
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            logDiv.innerHTML += '<div style="color: #fa0;">WARN: ' + args.join(' ') + '</div>';
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        // Test functions
        window.testLogin = function() {
            const email = document.getElementById('testEmail').value;
            const password = document.getElementById('testPassword').value;
            const result = document.getElementById('login-result');
            
            console.log('üîê TESTAA KIRJAUTUMINEN: ' + email);
            
            if (window.loginSystem) {
                try {
                    // Simuloi login event
                    const fakeEvent = { preventDefault: () => {} };
                    window.loginSystem.handleLogin(fakeEvent);
                    result.innerHTML = '<span class="success">‚úÖ Kirjautumistesti k√§ynnistetty</span>';
                } catch (error) {
                    result.innerHTML = '<span class="error">‚ùå Virhe: ' + error.message + '</span>';
                }
            } else {
                result.innerHTML = '<span class="error">‚ùå LoginSystem ei ole alustettu</span>';
            }
        };

        window.testRegister = function() {
            const result = document.getElementById('register-result');
            console.log('üìù TESTAA REKISTER√ñINTI');
            
            if (window.loginSystem) {
                result.innerHTML = '<span class="success">‚úÖ LoginSystem l√∂ytyi - rekister√∂inti k√§ytett√§viss√§</span>';
            } else {
                result.innerHTML = '<span class="error">‚ùå LoginSystem ei ole alustettu</span>';
            }
        };

        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DEBUG SIVU LADATTU');
            
            setTimeout(() => {
                // JavaScript tests
                const jsTests = document.getElementById('js-tests');
                let jsResults = '';
                
                jsResults += window.firebase ? '‚úÖ Firebase CDN ladattu<br>' : '‚ùå Firebase CDN puuttuu<br>';
                jsResults += window.firebaseApp ? '‚úÖ Firebase App alustettu<br>' : '‚ùå Firebase App puuttuu<br>';
                jsResults += window.firebaseDB ? '‚úÖ FirebaseDB saatavilla<br>' : '‚ùå FirebaseDB puuttuu<br>';
                jsResults += window.firebaseAuth ? '‚úÖ FirebaseAuth saatavilla<br>' : '‚ùå FirebaseAuth puuttuu<br>';
                jsResults += window.loginSystem ? '‚úÖ LoginSystem alustettu<br>' : '‚ùå LoginSystem puuttuu<br>';
                jsResults += typeof switchTab === 'function' ? '‚úÖ switchTab funktio saatavilla<br>' : '‚ùå switchTab puuttuu<br>';
                
                jsTests.innerHTML = jsResults;

                // Firebase tests
                const firebaseTests = document.getElementById('firebase-tests');
                let fbResults = '';
                
                if (window.firebase) {
                    fbResults += '‚úÖ Firebase namespace l√∂ytyi<br>';
                    fbResults += firebase.apps.length > 0 ? '‚úÖ Firebase Apps: ' + firebase.apps.length + '<br>' : '‚ùå Ei Firebase Apps<br>';
                    
                    if (firebase.apps.length > 0) {
                        const app = firebase.apps[0];
                        fbResults += '‚úÖ App nimi: ' + app.name + '<br>';
                        fbResults += '‚úÖ App options: ' + JSON.stringify(app.options.projectId) + '<br>';
                    }
                } else {
                    fbResults += '‚ùå Firebase namespace puuttuu<br>';
                }
                
                firebaseTests.innerHTML = fbResults;
                
            }, 2000);
        });
    </script>
</body>
</html>