<!DOCTYPE html>
<html>
<head>
    <title>Test Admin Logic</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2rem; }
        .test { margin: 1rem; padding: 1rem; border: 1px solid #ccc; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
    </style>
</head>
<body>
    <h1>Test Admin Logic</h1>
    <button onclick="testAdminLogic()">Test Admin Email Checking</button>
    <div id="results"></div>
    
    <h2>Quick Login Tests</h2>
    <button onclick="loginAsAdmin()">Login as Admin</button>
    <button onclick="loginAsRegular()">Login as Regular User</button>
    <button onclick="showCurrentUser()">Show Current User</button>
    <button onclick="clearStorage()">Clear Storage</button>
    
    <script>
        function testAdminLogic() {
            const adminEmails = ['demo@loytokauppa.fi', 'admin@loytokauppa.fi'];
            const testEmails = [
                'demo@loytokauppa.fi',
                'admin@loytokauppa.fi', 
                'test@example.com',
                'user@gmail.com',
                'another@admin.fi'
            ];
            
            let html = '<h3>Admin Logic Test Results:</h3>';
            
            testEmails.forEach(email => {
                const isAdmin = adminEmails.includes(email);
                const className = (email.includes('demo') || email.includes('admin@loytokauppa')) ? 
                    (isAdmin ? 'success' : 'error') : 
                    (isAdmin ? 'error' : 'success');
                
                html += `<div class="test ${className}">
                    <strong>${email}</strong>: ${isAdmin ? 'ADMIN' : 'Regular User'}
                    ${className === 'error' ? ' ❌ INCORRECT' : ' ✅ CORRECT'}
                </div>`;
            });
            
            document.getElementById('results').innerHTML = html;
        }
        
        function loginAsAdmin() {
            const adminUser = {
                id: 'test-admin',
                name: 'Test Admin',
                email: 'demo@loytokauppa.fi',
                profile: { avatar: '', phone: '', address: '' },
                loginTime: new Date().toISOString(),
                isAdmin: true
            };
            
            localStorage.setItem('currentUser', JSON.stringify(adminUser));
            localStorage.setItem('user_logged_in', 'true');
            alert('Logged in as Admin');
            showCurrentUser();
        }
        
        function loginAsRegular() {
            const regularUser = {
                id: 'test-regular',
                name: 'Test User',
                email: 'test@example.com',
                profile: { avatar: '', phone: '', address: '' },
                loginTime: new Date().toISOString(),
                isAdmin: false
            };
            
            localStorage.setItem('currentUser', JSON.stringify(regularUser));
            localStorage.setItem('user_logged_in', 'true');
            alert('Logged in as Regular User');
            showCurrentUser();
        }
        
        function showCurrentUser() {
            const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            const loggedIn = localStorage.getItem('user_logged_in');
            
            let html = '<h3>Current User Status:</h3>';
            if (user) {
                html += `<div class="test ${user.isAdmin ? 'success' : ''}">
                    <strong>Name:</strong> ${user.name}<br>
                    <strong>Email:</strong> ${user.email}<br>
                    <strong>Admin:</strong> ${user.isAdmin ? 'YES' : 'NO'}<br>
                    <strong>Logged In:</strong> ${loggedIn}<br>
                    <strong>Login Time:</strong> ${user.loginTime || 'N/A'}
                </div>`;
            } else {
                html += '<div class="test error">No user logged in</div>';
            }
            
            document.getElementById('results').innerHTML = html;
        }
        
        function clearStorage() {
            localStorage.clear();
            alert('Storage cleared');
            showCurrentUser();
        }
        
        // Auto-run test on load
        testAdminLogic();
    </script>
</body>
</html>